(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{45:function(e,t,a){e.exports=a(84)},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(26),c=a.n(s),o=a(11),i=a(10),u=a(44),l=(a(54),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_URL_DATA":return t.payload;case"CLEAR_URL_DATA":return[];default:return e}}),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.payload;case"UNSET_USER":return{};default:return e}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"register";switch((arguments.length>1?arguments[1]:void 0).type){case"SET_TO_LOGIN_MODE":return"login";case"SET_TO_REGISTER_MODE":return"register";default:return e}},m=Object(o.c)({loginMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch((arguments.length>1?arguments[1]:void 0).type){case"CLEAR_LOGIN_ERROR":return"";case"LOGIN_INPUT_ERROR":return"Enter your username and password!";case"LOGIN_FAILED":return"Oops! The username and password didn't match. Try again!";case"LOGIN_FAILED_NO_CODE":return"Oops! Something went wrong! Is the server running?";default:return e}},registrationMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch((arguments.length>1?arguments[1]:void 0).type){case"CLEAR_REGISTRATION_ERROR":return"";case"REGISTRATION_INPUT_ERROR":return"Choose a username and password!";case"REGISTRATION_PASSWORD_ERROR":return"Oops! Passwords don't match.";case"REGISTRATION_FAILED":return"Oops! That didn't work. The username might already be taken. Try again!";default:return e}}}),h=Object(o.c)({urlData:l,user:p,loginMode:d,errors:m}),E=a(5),f=a.n(E),g=a(6),O=a(15),b=a.n(O),R=f.a.mark(w),v=f.a.mark(_),y=f.a.mark(T);function w(e){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.post("api/url",e.payload);case 3:return t.next=5,Object(g.b)({type:"FETCH_URL_DATA"});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error with URL data POST to server:",t.t0);case 10:case"end":return t.stop()}},R,null,[[0,7]])}function _(){var e;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.get("api/url");case 3:return e=t.sent,t.next=6,Object(g.b)({type:"SET_URL_DATA",payload:e.data});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("URL data get request failed",t.t0);case 11:case"end":return t.stop()}},v,null,[[0,8]])}function T(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.c)("SEND_URL_DATA",w);case 2:return e.next=4,Object(g.c)("FETCH_URL_DATA",_);case 4:case"end":return e.stop()}},y)}var I=T,S=f.a.mark(N),C=f.a.mark(j);function N(){var e,t;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e={headers:{"Content-Type":"application/json"},withCredentials:!0},a.next=4,b.a.get("api/user",e);case 4:return t=a.sent,a.next=7,Object(g.b)({type:"SET_USER",payload:t.data});case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("User get request failed",a.t0);case 12:case"end":return a.stop()}},S,null,[[0,9]])}function j(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.c)("FETCH_USER",N);case 2:case"end":return e.stop()}},C)}var L=j,U=f.a.mark(A),x=f.a.mark(k);function A(e){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(g.b)({type:"CLEAR_REGISTRATION_ERROR"});case 3:return t.next=5,b.a.post("api/user/register",e.payload);case 5:return t.next=7,Object(g.b)({type:"LOGIN",payload:e.payload});case 7:return t.next=9,Object(g.b)({type:"SET_TO_LOGIN_MODE"});case 9:t.next=16;break;case 11:return t.prev=11,t.t0=t.catch(0),console.log("Error with user registration:",t.t0),t.next=16,Object(g.b)({type:"REGISTRATION_FAILED"});case 16:case"end":return t.stop()}},U,null,[[0,11]])}function k(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.c)("REGISTER",A);case 2:case"end":return e.stop()}},x)}var D=k,G=f.a.mark(P),F=f.a.mark(H),M=f.a.mark(q);function P(e){var t;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(g.b)({type:"CLEAR_LOGIN_ERROR"});case 3:return t={headers:{"Content-Type":"application/json"},withCredentials:!0},a.next=6,b.a.post("api/user/login",e.payload,t);case 6:return a.next=8,Object(g.b)({type:"FETCH_USER"});case 8:a.next=20;break;case 10:if(a.prev=10,a.t0=a.catch(0),console.log("Error with user login:",a.t0),401!==a.t0.response.status){a.next=18;break}return a.next=16,Object(g.b)({type:"LOGIN_FAILED"});case 16:a.next=20;break;case 18:return a.next=20,Object(g.b)({type:"LOGIN_FAILED_NO_CODE"});case 20:case"end":return a.stop()}},G,null,[[0,10]])}function H(e){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={headers:{"Content-Type":"application/json"},withCredentials:!0},e.next=4,b.a.post("api/user/logout",t);case 4:return e.next=6,Object(g.b)({type:"UNSET_USER"});case 6:return e.next=8,Object(g.b)({type:"CLEAR_USER_DATA"});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error with user logout:",e.t0);case 13:case"end":return e.stop()}},F,null,[[0,10]])}function q(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.c)("LOGIN",P);case 2:return e.next=4,Object(g.c)("LOGOUT",H);case 4:case"end":return e.stop()}},M)}var B=q,z=f.a.mark(J);function J(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.a)([I(),L(),D(),B()]);case 2:case"end":return e.stop()}},z)}var W=a(16),Y=a(17),$=a(19),K=a(18),Q=a(20),V=(a(75),a(29)),X=a(21),Z=a(22),ee=(a(76),function(e){function t(){var e,a;Object(W.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object($.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={originalURL:"",showErrorMessage:!1},a.handleInputChange=function(e){return function(t){a.setState(Object(Z.a)({},e,t.target.value))}},a.handleFormSubmit=function(e){e.preventDefault(),a.validateURL(a.state.originalURL)},a.validateURL=function(e){/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/.test(e)?(a.setState({showErrorMessage:!1}),a.props.dispatch({type:"SEND_URL_DATA",payload:{originalURL:a.state.originalURL}}),console.log("URL valid!!"),a.setState({originalURL:""})):(a.setState({showErrorMessage:!0}),console.log("URL invalid!"))},a}return Object(Q.a)(t,e),Object(Y.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"FETCH_URL_DATA"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"mainContainer"},r.a.createElement("div",{className:"secondaryContainer"},r.a.createElement("div",{className:"headerContainer"},r.a.createElement("h1",{id:"urlHeader"},"URLs"),r.a.createElement("button",{id:"signOutButton",onClick:function(){return e.props.dispatch({type:"LOGOUT"})}},"Sign Out")),r.a.createElement("form",{onSubmit:this.handleFormSubmit,className:"urlForm"},r.a.createElement("div",{className:"formContainer",align:"left"},r.a.createElement("input",{type:"text",required:!0,value:this.state.originalURL,onChange:this.handleInputChange("originalURL"),id:!1===this.state.showErrorMessage?"urlInput":"errorInput"}),!0===this.state.showErrorMessage&&r.a.createElement("p",{id:"errorSpan"},"Error: Long URL is not a valid URL"),r.a.createElement("button",{value:"submit",type:"submit",id:"createURLButton"},"Create URL"))),r.a.createElement("table",{className:"urlTable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Original URL"),r.a.createElement("th",null,"Tiny URL"),r.a.createElement("th",null,"Hit Count"))),this.props.urlData.length>0&&r.a.createElement("tbody",null,this.props.urlData.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement("p",null,e.original_URL)),r.a.createElement("td",null,r.a.createElement("a",{href:"https://chiisai.herokuapp.com/chiisai/".concat(e.id),rel:"noopener noreferrer",target:"_blank"},"https://chiisai.herokuapp.com/chiisai/",e.id)),r.a.createElement("td",null,e.hit_count))})))))}}]),t}(n.Component)),te=Object(i.b)(function(e){return{urlData:e.urlData}})(ee),ae=a(42),ne=(a(77),function(e){function t(){var e,a;Object(W.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object($.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.login=function(e){e.preventDefault(),a.state.username&&a.state.password?a.props.dispatch({type:"LOGIN",payload:{username:a.state.username,password:a.state.password}}):a.props.dispatch({type:"LOGIN_INPUT_ERROR"})},a.handleInputChangeFor=function(e){return function(t){a.setState(Object(Z.a)({},e,t.target.value))}},a}return Object(Q.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{align:"center",className:"mainContainer"},this.props.errors.loginMessage&&r.a.createElement("h2",null,this.props.errors.loginMessage),r.a.createElement("p",{id:"loginCaption"},"You need to sign in or sign up before continuing."),r.a.createElement("form",{onSubmit:this.login,className:"userForm",id:"loginForm"},r.a.createElement("div",{className:"userSecondaryContainer"},r.a.createElement("h1",{className:"userHeader"}," Sign In"),r.a.createElement("p",{className:"userCaption",align:"left"},"Email"),r.a.createElement("input",{className:"userInput",required:!0,type:"email",value:this.state.username,onChange:this.handleInputChangeFor("username")}),r.a.createElement("p",{className:"userCaption",align:"left"},"Password"),r.a.createElement("input",{className:"userInput",type:"password",pattern:".{6,}",required:!0,title:"6 characters minimum",value:this.state.password,onChange:this.handleInputChangeFor("password")}),r.a.createElement("button",{type:"submit",name:"submit",className:"primaryUserButton"},"Sign In"),r.a.createElement("button",{className:"secondaryUserButton",type:"button",onClick:function(){e.props.dispatch({type:"SET_TO_REGISTER_MODE"})}},"Sign Up"))))}}]),t}(n.Component)),re=Object(X.e)(Object(i.b)(function(e){return{errors:e.errors}})(ne)),se=(a(83),function(e){function t(){var e,a;Object(W.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object($.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",confirmPassword:""},a.handleInputChangeFor=function(e){return function(t){a.setState(Object(Z.a)({},e,t.target.value))}},a.registerUser=function(e){e.preventDefault(),a.state.username&&a.state.password&&a.state.password===a.state.confirmPassword?a.props.dispatch({type:"REGISTER",payload:{username:a.state.username,password:a.state.password}}):a.state.password!==a.state.confirmPassword?a.props.dispatch({type:"REGISTRATION_PASSWORD_ERROR"}):a.props.dispatch({type:"REGISTRATION_INPUT_ERROR"})},a}return Object(Q.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{align:"center",className:"mainContainer"},this.props.errors.registrationMessage&&r.a.createElement("h2",null,this.props.errors.registrationMessage),r.a.createElement("form",{onSubmit:this.registerUser,className:"userForm",id:"signUpForm"},r.a.createElement("h1",{className:"userHeader"},"Sign Up"),r.a.createElement("div",{className:"userSecondaryContainer"},r.a.createElement("p",{className:"userCaption",align:"left"},"Email"),r.a.createElement("input",{className:"userInput",type:"email",label:"Email",value:this.state.username,onChange:this.handleInputChangeFor("username"),required:!0}),r.a.createElement("p",{className:"userCaption",align:"left"},"Password ",r.a.createElement("span",null,"(6 character min.)")),r.a.createElement("input",{className:"userInput",type:"password",pattern:".{6,}",required:!0,title:"6 characters minimum",label:"Password",value:this.state.password,onChange:this.handleInputChangeFor("password")}),r.a.createElement("p",{className:"userCaption",align:"left"},"Confirm Password"),r.a.createElement("input",{className:"userInput",type:"password",pattern:".{6,}",required:!0,title:"6 characters minimum",label:"confirmPassword",value:this.state.confirmPassword,onChange:this.handleInputChangeFor("confirmPassword")}),r.a.createElement("br",null),r.a.createElement("button",{className:"primaryUserButton",type:"submit",name:"submit",value:"Register"},"Sign Up"),r.a.createElement("button",{className:"secondaryUserButton",type:"button",onClick:function(){e.props.dispatch({type:"SET_TO_LOGIN_MODE"})}},"Sign In"))))}}]),t}(n.Component)),ce=Object(i.b)(function(e){return{errors:e.errors}})(se),oe=Object(i.b)(function(e){return{user:e.user,loginMode:e.loginMode}})(function(e){var t,a=e.component,n=e.user,s=e.loginMode,c=Object(ae.a)(e,["component","user","loginMode"]);return t=n.id?a:"login"===s?re:ce,r.a.createElement(X.a,Object.assign({},c,{component:t}))}),ie=function(e){function t(){return Object(W.a)(this,t),Object($.a)(this,Object(K.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(Y.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"FETCH_USER"})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(V.a,null,r.a.createElement("div",null,r.a.createElement(X.c,null,r.a.createElement(oe,{path:"/",exact:!0,component:te}),r.a.createElement(X.a,{render:function(){return r.a.createElement("h1",null,"404")}})))))}}]),t}(n.Component),ue=Object(i.b)()(ie),le=Object(u.a)(),pe=[le],de=Object(o.e)(h,o.a.apply(void 0,pe));le.run(J),c.a.render(r.a.createElement(i.a,{store:de},r.a.createElement(ue,null)),document.getElementById("react-root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.e7700ba4.chunk.js.map